{% extends 'blog/base.html' %}
{% block content %}
<div class="jumbotron jumbotron-fluid">
  <div class="container">
    <h1 class="display-4 raleway-heading">{{post.title}}</h1>
    <p class="lead">{{post.text|safe|linebreaksbr}}</p>
      {% if post.published_date %}
      <div class="text-muted">
          Published on: {{post.published_date}}
      </div>
      {% endif %}
      <a class="btn btn-primary" href="{% url 'blog:publish_post' pk=post.pk%}">Publish</a>
      {% if user.is_authenticated %}
      <a class="btn btn-warning" href="{% url 'blog:edit_post' pk=post.pk%}">Edit Post</a>
      <a class="btn btn-danger" href="{% url 'blog:delete_post' pk=post.pk%}">Delete Post</a>
      {%endif%}

      <hr class="mb-4">
      <h1>Comments</h1>
        <a class="btn btn-primary justify-self-right" href="{% url 'blog:add_comment_to_post' pk=post.pk%}">Add Comment</a>
      {% if post.comments.count==0 %}
      <p>No comments yet! Be the first one to add them!</p>
      {% else %}
      {% for comment in post.comments.all %}
      {% if user.is_authenticated or comment.approved_comment %}
      {{comment.created_date}}
      {% if not comment.approved_comment %}
      <a class="btn btn-success" href="{% url 'blog:approve_comment' pk=comment.pk%}">Approve comment</a>
      <a class="btn btn-danger" href="{% url 'blog:remove_comment' pk=comment.pk%}">Delete Comment</a>

      {% endif%}
      <p>{{post.text|safe|linebreaksbr}}</p>
      <p>Posted by: {{comment.author}}</p>
    {%endfor%}

  </div>
</div>

{% endblock %}